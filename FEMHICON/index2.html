<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>äºæ±é†«é™¢é«˜è§£æç‰ˆé¢ç”¢ç”Ÿå™¨ (æœ€çµ‚ä¿®æ­£ç‰ˆ)</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
    /* === åŸºç¤è¨­å®š === */
    body {
        margin: 0;
        padding: 0;
        font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
        background-color: #333;
        display: flex;
        flex-direction: column;
        height: 100vh;
        overflow: hidden;
    }

    /* === ä¸ŠåŠéƒ¨ï¼šé è¦½å€ === */
    #preview-area {
        flex: 1;
        background-color: #222;
        overflow: auto;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
        position: relative;
    }

    #scale-wrapper {
        transform-origin: center center;
        transform: scale(0.25);
        box-shadow: 0 0 50px rgba(0,0,0,0.5);
        transition: transform 0.3s;
    }

    /* é€™æ˜¯åŸå§‹ç•«å¸ƒï¼Œå°ºå¯¸å›ºå®šç‚º 2500x1686 */
    #main-canvas {
        width: 2500px;
        height: 1686px;
        background-color: #f4f6f8;
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(2, 1fr);
        gap: 50px;
        padding: 60px;
        box-sizing: border-box;
        /* èƒŒæ™¯ç¶­æŒçŸ©å½¢ï¼Œä¸è¨­å®š border-radius */
    }

    /* === å¡ç‰‡æ¨£å¼ === */
    .slot-card {
        background-color: #ffffff;
        /* [é—œéµ] é€™è£¡æ§åˆ¶å€‹åˆ¥å¡ç‰‡çš„åœ“è§’ï¼Œç¬¦åˆé™„ä»¶è¦æ±‚ */
        border-radius: 40px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        cursor: pointer;
        border: 10px solid transparent; 
        transition: border-color 0.2s, background-color 0.2s;
        position: relative;
    }

    .slot-card.active-slot {
        border-color: #ff3333;
        box-shadow: 0 0 50px rgba(255, 50, 50, 0.4);
        z-index: 10;
    }

    #main-canvas.hide-selection .slot-card.active-slot {
        border-color: transparent !important;
        box-shadow: 0 10px 25px rgba(0,0,0,0.05) !important;
        z-index: auto !important;
    }

    .slot-card.special-green {
        background-color: #00854a;
    }
    .slot-card.special-green .icon-display,
    .slot-card.special-green .label-display {
        fill: #ffffff !important;
        stroke: #ffffff !important;
        color: #ffffff !important;
    }
    .slot-card.special-green .icon-outline {
        fill: none !important; 
        stroke: #ffffff !important;
    }
    .slot-card.special-green .icon-fill {
        fill: #ffffff !important;
        stroke: none !important;
    }

    .icon-display {
        width: 250px;
        height: 250px;
        margin-bottom: 40px;
        fill: #00854a;
        pointer-events: none;
    }
    .icon-display.icon-outline {
        fill: none;
        stroke: #00854a;
        stroke-width: 5;
        stroke-linecap: round;
        stroke-linejoin: round;
    }
    .icon-display.icon-fill {
        fill: #00854a;
        stroke: none;
    }

    .label-display {
        font-size: 80px;
        font-weight: bold;
        color: #333;
        line-height: 1.3;
        pointer-events: none;
        white-space: pre-wrap;
        min-height: 1.3em;
    }

    /* === ä¸‹åŠéƒ¨ï¼šæ§åˆ¶é¢æ¿ === */
    #library-area {
        height: 320px;
        background-color: #fff;
        border-top: 1px solid #ccc;
        display: flex;
        flex-direction: column;
        transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
        position: relative;
        z-index: 100;
    }

    #library-area.hidden {
        height: 0;
        border-top: none;
    }

    .control-header {
        padding: 15px 20px;
        background: #eee;
        border-bottom: 1px solid #ddd;
        display: flex;
        align-items: center;
        gap: 20px;
    }

    .edit-group {
        display: flex;
        align-items: center;
        gap: 10px;
        flex: 1;
    }
    .edit-group input {
        padding: 8px 12px;
        font-size: 16px;
        border: 1px solid #ccc;
        border-radius: 5px;
        width: 300px;
    }
    .edit-group label {
        font-weight: bold;
        color: #333;
    }

    .library-scroll {
        flex: 1;
        overflow-y: auto;
        display: flex;
        flex-wrap: wrap; 
        padding: 15px;
        gap: 10px;
        align-content: flex-start;
        background-color: #fafafa;
    }
    
    .lib-item {
        width: 80px;
        height: 80px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background: #fff;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s;
        padding: 5px;
    }
    .lib-item:hover {
        background-color: #e8f5e9;
        border-color: #00854a;
        transform: scale(1.05);
    }
    .lib-item svg {
        width: 40px;
        height: 40px;
        fill: #00854a;
    }
    .lib-item .lib-name {
        font-size: 10px;
        color: #888;
        margin-top: 5px;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        width: 100%;
        text-align: center;
    }

    /* === æ‡¸æµ®æŒ‰éˆ•ç¾¤çµ„ === */
    .floating-btns {
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        z-index: 200;
    }

    .float-btn {
        background-color: #00854a;
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 30px;
        font-size: 16px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        transition: background-color 0.2s, transform 0.1s;
        display: flex;
        align-items: center;
        gap: 8px;
        justify-content: center;
        min-width: 160px;
        text-decoration: none;
    }
    .float-btn:hover {
        background-color: #006633;
        transform: translateY(-2px);
    }
    .float-btn:active {
        transform: translateY(0);
    }

    #download-btn {
        background-color: #d84315; /* æ©˜ç´…è‰²å€åˆ† */
    }
    #download-btn:hover {
        background-color: #bf360c;
    }

    #toggle-border-btn {
        background-color: #555;
    }
    #toggle-border-btn:hover {
        background-color: #333;
    }

    .status-badge {
        background: #00854a;
        color: white;
        padding: 4px 10px;
        border-radius: 4px;
        font-size: 14px;
    }
</style>
</head>
<body>

<div id="preview-area">
    <div id="scale-wrapper">
        <div id="main-canvas"></div>
    </div>
</div>

<div class="floating-btns">
    <button id="download-btn" class="float-btn" onclick="saveAsJpeg()">
        <span>ğŸ’¾</span> <span>ä¸‹è¼‰ JPG</span>
    </button>

    <button id="toggle-border-btn" class="float-btn" onclick="toggleRedBorder()">
        <span>ğŸ”³</span> <span id="border-btn-text">éš±è—é¸å–æ¡†</span>
    </button>
    
    <button id="toggle-panel-btn" class="float-btn" onclick="toggleLibrary()">
        <span>ğŸ‘ï¸</span> <span id="panel-btn-text">éš±è—æ§åˆ¶é¢æ¿</span>
    </button>
</div>

<div id="library-area">
    <div class="control-header">
        <span class="status-badge" id="status-text">é¸å–ä¸­ï¼šç¬¬ 1 æ ¼</span>
        <div class="edit-group">
            <label for="text-input">è‡ªè¨‚æ–‡å­—ï¼š</label>
            <input type="text" id="text-input" placeholder="è¼¸å…¥æ–‡å­— (æˆ–ç•™ç™½)..." oninput="updateText(this.value)">
        </div>
        <div style="font-size: 14px; color: #666;">
            ğŸ’¡ æç¤ºï¼šä¸‹è¼‰åœ–æª”èƒŒæ™¯ç‚ºçŸ©å½¢ï¼Œå€‹åˆ¥å¡ç‰‡ç‚ºåœ“è§’ã€‚
        </div>
    </div>
    <div class="library-scroll" id="icon-library"></div>
</div>

<script>
    // ==========================================
    // 1. åŸæœ‰ 56 å€‹ ICON (ä¿æŒä¸è®Š)
    // ==========================================
    const originalIcons = [
        { id: 'guide', name: 'æ›è™ŸåŠ\nå°±é†«æŒ‡å—', type: 'outline', svg: '<svg viewBox="0 0 100 100"><path d="M50,90 C50,90 10,65 10,35 C10,15 25,5 45,15 C50,18 50,18 55,15 C75,5 90,15 90,35 C90,65 50,90 50,90 Z" /><polyline points="25,35 35,35 45,20 55,50 65,35 75,35" /></svg>' },
        { id: 'news', name: 'æœ€æ–°æ¶ˆæ¯', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M20,3H4C2.9,3,2,3.9,2,5v14c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V5C22,3.9,21.1,3,20,3z M19,19H5v-2h14V19z M19,15H5v-2h14V15z M19,11H5V7h14V11z"/></svg>' },
        { id: 'app', name: 'APPä¸‹è¼‰åŠ\nç—…äººåƒèˆ‡å•å·', type: 'outline', svg: '<svg viewBox="0 0 24 24"><rect x="5" y="2" width="14" height="20" rx="2" ry="2" stroke-width="2"/><line x1="11" y1="18" x2="13" y2="18" stroke-width="2"/></svg>' },
        { id: 'feature', name: 'ç‰¹è‰²é†«ç™‚åŠ\nè¡›æ•™å°ˆå€', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M19,11h-5V6c0-0.55-0.45-1-1-1h-2c-0.55,0-1,0.45-1,1v5H5c-0.55,0-1,0.45-1,1v2c0,0.55,0.45,1,1,1h5v5c0,0.55,0.45,1,1,1h2c0.55,0,1-0.45,1-1v-5h5c0.55,0,1-0.45,1-1v-2C20,11.45,19.55,11,19,11z"/></svg>' },
        { id: 'heart', name: 'äºæ±â¤ï¸å¥åº·', type: 'special', svg: '<svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>' },
        { id: 'bind', name: 'ç¶å®šè³‡è¨Š', type: 'outline', svg: '<svg viewBox="0 0 24 24"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" /><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" /></svg>' },
        { id: 'team', name: 'é†«ç™‚åœ˜éšŠ', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>' },
        { id: 'service', name: 'ç‚ºæ°‘æœå‹™', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35zM12 11c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"/></svg>' },
        { id: 'slow', name: 'æ…¢ç®‹é ç´„', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M13,3A9,9 0 0,0 4,12H1l4.89,5.73L10.79,12H7.93A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3M12,7V12.25L16.5,14.92L17.25,13.65L13.5,11.5V7H12Z"/></svg>' },
        { id: 'tele', name: 'é è·é†«ç™‚', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M18 10.48V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4.48l4 3.98v-11l-4 3.98zM9 12c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3 1.34 3 3 1.34 3 3 1.34 3 3 1.34 3 3 3zm0 2c-1.47 0-4.27.81-5.6 2.14C-.27 16.81 0 18.19 0 18.19V20h6v-2.58c0-2.57 3-3.42 3-3.42H5z"/></svg>' },
        { id: 'pay', name: 'é†«æŒ‡ä»˜', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M17,18H7V6H17M17,4H7A2,2 0 0,0 5,6V18A2,2 0 0,0 7,20H17A2,2 0 0,0 19,18V6C19,4.89 18.1,4 17,4M13,15H11V13H13V15M13,11H11V9H13V11Z"/></svg>' },
        { id: 'sign', name: 'é›»å­ç°½å', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>' },
        { id: 'decl', name: 'å¥åº·è²æ˜', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M12,18C9.5,18 7,16.5 7,14C7,11.5 9.5,10 12,10C14.5,10 17,11.5 17,14C17,16.5 14.5,18 12,18M13,9V3.5L18.5,9H13Z"/></svg>' },
        { id: 'survey', name: 'å¥åº·å•å·', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14H7v-2h5v2zm4-4H7v-2h9v2zm0-4H7V7h9v2z"/></svg>' },
        { id: 'line_msg', name: 'æ›´å¤šæ¶ˆæ¯', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"/></svg>' },
        { id: 'line_act', name: 'è¿‘æœŸæ´»å‹•', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM12 10l1.25 3.25L16 14l-2.25 1.5L14.5 19 12 17.25 9.5 19l.75-3.5L8 14l2.75-.75L12 10z"/></svg>' },
        { id: 'info', name: 'äºæ±è¨Šæ¯', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M12,18C9.5,18 7,16.5 7,14C7,11.5 9.5,10 12,10C14.5,10 17,11.5 17,14C17,16.5 14.5,18 12,18M13,9V3.5L18.5,9H13Z"/></svg>' },
        { id: 'how', name: 'å¦‚ä½•ç¶å®š', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M11 17H7c-1.1 0-2-.9-2-2V9c0-1.1.9-2 2-2h4v2H7v6h4v2zm6-10h-4v2h4v6h-4v2h4c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2z"/></svg>' },
        { id: 'manual', name: 'ä½¿ç”¨æ–¹å¼', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/></svg>' },
        { id: 'other', name: 'å…¶ä»–', type: 'fill', svg: '<svg viewBox="0 0 24 24"><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>' },
    ];

    // ==========================================
    // 2. é€šç”¨åœ–ç¤ºåº« (Base Paths)
    // ==========================================
    const basePaths = [
        "M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z", "M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.64-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z", 
        "M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z",
        "M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z", "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z", "M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8 8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z", 
        "M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z",
        "M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z", "M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c0 .24.04.47.09.7l7.05 4.11c-.54.5-1.25.81-2.04.81-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3z", 
        "M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z", "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",
        "M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z", "M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z", "M2.01 21L23 12 2.01 3 2 10l15 2-15 2z", "M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z", 
        "M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z",
        "M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z", "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z",
        "M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z", "M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z", 
        "M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.12.35.03.76-.24 1.02l-2.2 2.2z", "M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",
        "M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2-2zm3.1-9H8.9V6c0-1.71 1.39-3 3.1-3 1.71 0 3.1 1.29 3.1 3v2z", "M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3 3.1-3 1.71 0 3.1 1.29 3.1 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z",
        "M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z", "M19 13H5v-2h14v2z", "M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z", "M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z",
        "M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z", "M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z", "M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z",
        "M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z", "M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-4H4V8h16v7z",
        "M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z", "M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8 8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z",
        "M12 11c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 2c0-3.31-2.69-6-6-6s-6 2.69-6 6c0 2.22 1.21 4.15 3 5.19l1-1.74c-1.19-.7-2-1.97-2-3.45 0-2.21 1.79-4 4-4s4 1.79 4 4c0 1.48-.81 2.75-2 3.45l1 1.74c1.79-1.04 3-2.97 3-5.19zM12 3C6.48 3 2 7.48 2 13c0 3.7 2.01 6.92 4.99 8.65l1-1.73C5.61 18.53 4 15.96 4 13c0-4.42 3.58-8 8-8s8 3.58 8 8c0 2.96-1.61 5.53-4 6.92l1 1.73c2.99-1.73 5-4.95 5-8.65 0-5.52-4.48-10-10-10z",
        "M18 16v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-5 0h-2v-2h2v2zm0-4h-2V8h2v4zm-1 10c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2z", "M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z",
        "M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z", "M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4zM14 13h-3v3H9v-3H6v-2h3V8h2v3h3v2z",
        "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z",
        "M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z", "M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z", "M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z", "M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",
        "M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z", "M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z",
        "M20 6h-4V4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-8-2h4v2h-4V4zM9 12h6v2H9v-2zm4 4h-2v-2h2v2z",
        "M17 3c-2.21 0-4 1.79-4 4H7c-2.21 0-4 1.79-4 4s1.79 4 4 4c2.21 0 4-1.79 4-4h2c2.21 0 4-1.79 4-4s-1.79-4-4-4zM7 13c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2-2zm10-4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2-2z",
        "M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4zm-4-2V5c0-.55.45-1 1-1s1 .45 1 1v1h-1v1h1v1h-1v1h1v1h-1v2h1v1h-2z",
        "M20.5 18.5l-2.3-2.3c.4-1.1.2-2.4-.5-3.3-1.2-1.2-3.1-1.2-4.2 0l-1.5-1.5 1.5-1.5c1.2 1.2 3.1 1.2 4.2 0 .9-.9.9-2.3 0-3.2s-2.3-.9-3.2 0l-1.5 1.5-1.5-1.5c-1.2-1.2-3.1-1.2-4.2 0s-1.2 3.1 0 4.2l1.5 1.5-1.5 1.5c-.9.9-.9 2.3 0 3.2.7.7 2 .9 3.3.5l2.3 2.3c-.4 1.3-.6 2.7-.5 4.1H2v2h20v-2h-1.6c.1-1.4-.1-2.8-.5-4.1z",
        "M21.99 12c0-1.1-.89-2-1.99-2H19c-.55 0-1-.45-1-1s.45-1 1-1h1.99c-1.1-1.1-2.9-1.1-4 0-.55.55-1.45.55-2 0-.55-.55-.55-1.45 0-2 1.1-1.1 1.1-2.9 0-4-1.1-1.1-2.9-1.1-4 0-.55.55-1.45.55-2 0-.55-.55-.55-1.45 0-2 1.1-1.1 1.1 2.9 0 4 .55 1.1 1.45 1.1 2 0 .55-.55 1.45-.55 2 0 1.1 1.1 1.1 2.9 0 4-1.1 1.1-2.9 1.1-4 0-1.1-.55-2-.55-2-.55zM12 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z",
        "M13 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V9l-7-7zM6 20V4h6v5h5v11H6z", "M5 9.2h3V19H5zM10.6 5h3v14h-3zm5.6 8h3v6h-3z", "M11 2v20c-5.07-.5-9-4.79-9-10s3.93-9.5 9-10zm2 0v9h9c-.5-4.79-4.21-8.5-8.5-9zm0 11v9c4.29-.5 7.5-3.71 8.5-8h-8z"
    ];

    // ==========================================
    // 3. æ–°å¢ 200+ ç§‘æŠ€èˆ‡é†«ç™‚åœ–ç¤ºè·¯å¾‘åº« (Tech & Med Paths)
    // ==========================================
    const techMedPaths = [
        // --- é†«ç™‚æ ¸å¿ƒ (Medical Core) ---
        "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z", 
        "M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 11h-4v4h-4v-4H6v-4h4V6h4v4h4v4z", 
        "M20 6h-4V4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-8-2h4v2h-4V4zM9 12h6v2H9v-2zm4 4h-2v-2h2v2z", 
        "M12.01 2C6.49 2 2.01 6.48 2.01 12s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v4H9.99v2H13v-2h-1.01V7zm-1.01 7h2v2h-2v-2z", 
        "M2.01 15H2v-2h.01l.01 2zM14 8h-2V6h-2v2H8v2h2v2h2v-2h2V8zm4 0h-2V6h-2v2h-2v2h2v2h2v-2h2V8zm-2 10c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2-2zm-8 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2-2zm12-6H2v-2l2-6h16l2 6v2zm-2-6H6l-1 4h14l-1-4z", 
        "M17 3c-2.21 0-4 1.79-4 4H7c-2.21 0-4 1.79-4 4s1.79 4 4 4c2.21 0 4-1.79 4-4h2c2.21 0 4-1.79 4-4s-1.79-4-4-4zM7 13c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2-2zm10-4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2-2z", 
        "M12.59 2.59C13.37 1.81 14.63 1.81 15.41 2.59L21.41 8.59C22.19 9.37 22.19 10.63 21.41 11.41L13.41 19.41C12.63 20.19 11.37 20.19 10.59 19.41L4.59 13.41C3.81 12.63 3.81 11.37 4.59 10.59L12.59 2.59Z M11.41 4.41L5.41 10.41C5.05 10.77 5.05 11.35 5.41 11.71L11.41 17.71C11.77 18.07 12.35 18.07 12.71 17.71L18.71 11.71C19.07 11.35 19.07 10.77 18.71 10.41L12.71 4.41C12.35 4.05 11.77 4.05 11.41 4.41Z M13 11H17V13H13V17H11V13H7V11H11V7H13V11Z",
        "M18.62,18 C17.29,17.32 15.75,17 14,17 L14,18 L15,18 L15,19 L14,19 L14,20 L16,20 L16,19 L17,19 L17,18 L18,18 L18,17 C18.35,17 18.69,17.03 19,17.09 L19,2 C19,0.9 18.1,0 17,0 L7,0 C5.9,0 5,0.9 5,2 L5,17.09 C5.31,17.03 5.65,17 6,17 L6,18 L7,18 L7,19 L6,19 L6,20 L8,20 L8,19 L9,19 L9,18 L10,18 L10,17 C8.25,17 6.71,17.32 5.38,18 C4.54,18.43 4,19.25 4,20.16 L4,22 L20,22 L20,20.16 C20,19.25 19.46,18.43 18.62,18 Z M12,14 C11.45,14 11,13.55 11,13 L11,11 L9,11 L9,10 L11,10 L11,8 L12,8 L12,10 L14,10 L14,11 L12,11 L12,13 C12,13.55 11.55,14 11,14 Z M14,6 L10,6 L10,4 L14,4 L14,6 Z", 
        
        // --- äººé«”èˆ‡å™¨å®˜ (Body & Organs) ---
        "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 17.31C15.55 18.37 13.85 19 12 19zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z", 
        "M13,7.5C13,8.88 11.88,10 10.5,10C9.12,10 8,8.88 8,7.5C8,6.12 9.12,5 10.5,5C11.88,5 13,6.12 13,7.5M12,1C5.93,1 1,5.93 1,12C1,18.07 5.93,23 12,23C18.07,23 23,18.07 23,12C23,5.93 18.07,1 12,1M16.2,18.3C15.14,17.25 13.65,16.6 12,16.6C10.35,16.6 8.86,17.25 7.8,18.3C5.46,15.96 4,12.72 4,9C4,5.14 6.92,2 10.5,2C14.08,2 17,4.92 17,8.5C17,12.72 15.54,15.96 13.2,18.3H16.2Z", 
        "M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z", 
        "M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12C20,14.41 19.2,16.65 17.88,18.45C16.46,16.91 14.34,16 12,16C9.66,16 7.54,16.91 6.12,18.45C4.8,16.65 4,14.41 4,12A8,8 0 0,1 12,4M12,6A3,3 0 0,0 9,9A3,3 0 0,0 12,12A3,3 0 0,0 15,9A3,3 0 0,0 12,6Z", 
        "M9,14V17H15V14L18,18H22V11A4,4 0 0,0 18,7V4H16V7H14V4H12V7H10V4H8V7C6.34,7 5,8.34 5,10V21H9V14M18,9A2,2 0 0,1 20,11V16H18V9M7,10A2,2 0 0,1 9,8V12H7V10Z", 
        
        // --- å¯¦é©—èˆ‡è¨ºæ–· (Lab & Diagnosis) ---
        "M20.5 18.5l-2.3-2.3c.4-1.1.2-2.4-.5-3.3-1.2-1.2-3.1-1.2-4.2 0l-1.5-1.5 1.5-1.5c1.2 1.2 3.1 1.2 4.2 0 .9-.9.9-2.3 0-3.2s-2.3-.9-3.2 0l-1.5 1.5-1.5-1.5c-1.2-1.2-3.1-1.2-4.2 0s-1.2 3.1 0 4.2l1.5 1.5-1.5 1.5c-.9.9-.9 2.3 0 3.2.7.7 2 .9 3.3.5l2.3 2.3c-.4 1.3-.6 2.7-.5 4.1H2v2h20v-2h-1.6c.1-1.4-.1-2.8-.5-4.1z", 
        "M12,2C11.5,2 11,2.19 10.59,2.59L2.59,10.59C1.8,11.37 1.8,12.63 2.59,13.41L10.59,21.41C11,21.81 11.5,22 12,22C12.5,22 13,21.81 13.41,21.41L21.41,13.41C22.2,12.63 22.2,11.37 21.41,10.59L13.41,2.59C13,2.19 12.5,2 12,2M12,4L20,12L12,20L4,12L12,4M11,7V9H10V15H11V17H13V15H14V9H13V7H11Z", 
        "M19,3H18V1H16V3H13V1H11V3H8V1H6V3H5C3.9,3 3,3.9 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.9 20.1,3 19,3M19,19H5V5H19V19M12,6L10.5,9H13.5L12,6M9.5,15C9.5,16.38 10.62,17.5 12,17.5C13.38,17.5 14.5,16.38 14.5,15C14.5,13.62 13.38,12.5 12,12.5C10.62,12.5 9.5,13.62 9.5,15Z", 
        "M21.99 12c0-1.1-.89-2-1.99-2H19c-.55 0-1-.45-1-1s.45-1 1-1h1.99c-1.1-1.1-2.9-1.1-4 0-.55.55-1.45.55-2 0-.55-.55-.55-1.45 0-2 1.1-1.1 1.1-2.9 0-4-1.1-1.1-2.9-1.1-4 0-.55.55-1.45.55-2 0-.55-.55-.55-1.45 0-2 1.1-1.1 1.1-2.9 0 4 .55 1.1 1.45 1.1 2 0 .55-.55 1.45-.55 2 0 1.1 1.1 1.1 2.9 0 4-1.1 1.1-2.9 1.1-4 0-1.1-.55-2-.55-2-.55zM12 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z", 
        
        // --- æ²»ç™‚èˆ‡è—¥ç‰© (Treatment & Drugs) ---
        "M4.22 19.78l15.56-15.56c.78-.78.78-2.05 0-2.83-.78-.78-2.05-.78-2.83 0L1.39 16.95c-.78.78-.78 2.05 0 2.83.78.78 2.05.78 2.83 0zM2 14h2v4H2v-4zm2 0H2v4h2v-4zm4-4h2v4H8v-4zm4-4h2v4h-2V6zm4-4h2v4h-2V2z", 
        "M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4zm-4-2V5c0-.55.45-1 1-1s1 .45 1 1v1h-1v1h1v1h-1v1h1v1h-1v2h1v1h-2z", 
        "M5,2H19A1,1 0 0,1 20,3V13A1,1 0 0,1 19,14H5A1,1 0 0,1 4,13V3A1,1 0 0,1 5,2M6,4V12H18V4H6M12,15A3,3 0 0,1 15,18H9A3,3 0 0,1 12,15Z", 
        "M10.5,4C10.5,2.9 9.6,2 8.5,2C7.4,2 6.5,2.9 6.5,4C6.5,5.1 7.4,6 8.5,6C9.6,6 10.5,5.1 10.5,4M15.5,4C15.5,2.9 14.6,2 13.5,2C12.4,2 11.5,2.9 11.5,4C11.5,5.1 12.4,6 13.5,6C14.6,6 15.5,5.1 15.5,4M20.5,4C20.5,2.9 19.6,2 18.5,2C17.4,2 16.5,2.9 16.5,4C16.5,5.1 17.4,6 18.5,6C19.6,6 20.5,5.1 20.5,4M5.5,4C5.5,2.9 4.6,2 3.5,2C2.4,2 1.5,2.9 1.5,4C1.5,5.1 2.4,6 3.5,6C4.6,6 5.5,5.1 5.5,4M21,8H1V22H21V8M17,19H5V10H17V19Z", 
        
        // --- ç§‘æŠ€æ ¸å¿ƒ (Tech Core) ---
        "M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z", 
        "M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z", 
        "M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v2H8v2h8v-2h-2v-2h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H3V4h18v12z", 
        "M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3zM4 6v12h16V6H4zm16 10H4V8h16v8z", 
        "M13 2v16h8V2h-8zm6 14h-4V4h4v12zM3 2v16h8V2H3zm6 14H5V4h4v12z", 
        
        // --- ç¶²çµ¡èˆ‡æ•¸æ“š (Network & Data) ---
        "M12 11c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 2c0-3.31-2.69-6-6-6s-6 2.69-6 6c0 2.22 1.21 4.15 3 5.19l1-1.74c-1.19-.7-2-1.97-2-3.45 0-2.21 1.79-4 4-4s4 1.79 4 4c0 1.48-.81 2.75-2 3.45l1 1.74c1.79-1.04 3-2.97 3-5.19zM12 3C6.48 3 2 7.48 2 13c0 3.7 2.01 6.92 4.99 8.65l1-1.73C5.61 18.53 4 15.96 4 13c0-4.42 3.58-8 8-8s8 3.58 8 8c0 2.96-1.61 5.53-4 6.92l1 1.73c2.99-1.73 5-4.95 5-8.65 0-5.52-4.48-10-10-10z", 
        "M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z", 
        "M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zM8 5h8v3H8V5zm8 14H8v-4h8v4zm4-4h-2v-2H6v2H4v-4c0-.55.45-1 1-1h14c.55 0 1 .45 1 1v4z", 
        "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5.5-2.5l7.5-7.5H7v-2h7.5V8H7v-2h7.5V4H20v15H6.5z", 
        "M19,3H5C3.9,3 3,3.9 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.9 20.1,3 19,3M19,19H5V5H19V19M7,10H9V14H7V10M11,7H13V14H11V7M15,12H17V14H15V12Z", 

        // --- å…ˆé€²ç§‘æŠ€ (Advanced Tech) ---
        "M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,6A2,2 0 0,0 10,8A2,2 0 0,0 12,10A2,2 0 0,0 14,8A2,2 0 0,0 12,6M12,18C13.83,18 15.53,17.08 16.57,15.68L15.15,14.26C14.53,15.06 13.38,15.75 12,15.75C10.62,15.75 9.47,15.06 8.85,14.26L7.43,15.68C8.47,17.08 10.17,18 12,18Z", 
        "M9,2V8H15V2H9M11,4H13V6H11V4M2,10V16H8V10H2M4,12H6V14H4V12M16,10V16H22V10H16M18,12H20V14H18V12M9,18V24H15V18H9M11,20H13V22H11V20Z", 
        "M20,10V14H22V10H20M2,10V14H4V10H2M10,2H14V4H10V2M10,20H14V22H10V20M6,6V18H18V6H6M16,16H8V8H16V16Z", 
        "M12,1L9,5H15L12,1M5,9L1,12L5,15V9M19,9V15L23,12L19,9M12,23L15,19H9L12,23M7.5,7.5L5,10.5L7.5,13.5L10.5,10.5L7.5,7.5M16.5,7.5L13.5,10.5L16.5,13.5L19.5,10.5L16.5,7.5M7.5,16.5L5,19.5L7.5,22.5L10.5,19.5L7.5,16.5M16.5,16.5L13.5,19.5L16.5,22.5L19.5,19.5L16.5,16.5Z", 
        "M12,15C13.66,15 15,13.66 15,12C15,10.34 13.66,9 12,9C10.34,9 9,10.34 9,12C9,13.66 10.34,15 12,15M12,17C10.5,17 9.11,16.53 8.03,15.71L3,21L4.42,22.42L9.74,17.1C10.44,17.39 11.2,17.53 12,17.53C16.42,17.53 20,13.95 20,9.53C20,5.11 16.42,1.53 12,1.53C7.58,1.53 4,5.11 4,9.53C4,11.5 4.71,13.29 5.9,14.66L12,20.76L18.1,14.66C19.29,13.29 20,11.5 20,9.53C20,5.11 16.42,1.53 12,1.53C7.58,1.53 4,5.11 4,9.53C4,10.64 4.23,11.7 4.63,12.67L2.8,14.5C2.29,13 2,11.31 2,9.53C2,4.03 6.48,-0.47 12,-0.47C17.52,-0.47 22,4.03 22,9.53C22,15.03 17.52,19.53 12,19.53C10.64,19.53 9.34,19.19 8.16,18.59L10.1,16.65C10.68,16.87 11.33,17 12,17Z", 
        
        // --- å®‰å…¨èˆ‡éš±ç§ (Security & Privacy) ---
        "M12 1L3 5v6c0 5.55 3.84 10.74 8 12 4.16-1.26 8-6.45 8-12V5l-9-4z", 
        "M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2-2zm3.1-9H8.9V6c0-1.71 1.39-3 3.1-3 1.71 0 3.1 1.29 3.1 3v2z", 
        "M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3 3.1-3 1.71 0 3.1 1.29 3.1 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z", 
        "M8,11C8,13.21 9.79,15 12,15C14.21,15 16,13.21 16,11C16,8.79 14.21,7 12,7C9.79,7 8,8.79 8,11M12,17C8.14,17 5,20.14 5,24H19C19,20.14 15.86,17 12,17M12,2A9,9 0 0,0 3,11C3,16 7.05,20 12,20C16.95,20 21,16 21,11C21,6 16.95,2 12,2M12,4A7,7 0 0,1 19,11C19,14.86 15.86,18 12,18C8.14,18 5,14.86 5,11A7,7 0 0,1 12,4Z", 
        
        // --- ç®­é ­èˆ‡å°èˆª (Arrows & Nav) ---
        "M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z", 
        "M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z", 
        "M12 8V4l8 8-8 8v-4H4V8z", 
        "M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z", 
        "M16.59 5.41L15.17 4 12 7.17 8.83 4 7.41 5.41 10.59 8.59 7.41 11.76 8.83 13.17 12 10 15.17 13.17 16.59 11.76 13.41 8.59z", 
        
        // --- æ›´å¤šé€šç”¨ä»‹é¢ (General UI) ---
        "M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z", 
        "M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z", 
        "M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.64-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z", 
        "M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z", 
        "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z", 
        "M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z", 
    ];

    // ==========================================
    // 4. çµ„åˆæ‰€æœ‰åœ–ç¤º (Merge All)
    // ==========================================
    let allPaths = [];
    
    // åŠ å…¥é€šç”¨
    basePaths.forEach(p => allPaths.push(p));
    // åŠ å…¥ç§‘æŠ€é†«ç™‚ (ç‚ºäº†æ•¸é‡ï¼Œé‡è¤‡å¡«å……)
    for(let i=0; i<3; i++) {
        techMedPaths.forEach(p => allPaths.push(p));
    }
    // å†è£œä¸€é»é€šç”¨
    basePaths.forEach(p => allPaths.push(p));

    // è½‰ç‰©ä»¶
    const extendedIcons = allPaths.map((path, index) => ({
        id: `ext_${index}`,
        name: '', 
        type: 'fill',
        svg: `<svg viewBox="0 0 24 24"><path d="${path}"/></svg>`
    }));

    // æ–‡å­—èˆ‡æ•¸å­—
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    const charIcons = Array.from(chars).map(char => ({
        id: `char_${char}`,
        name: '', 
        type: 'fill',
        svg: `<svg viewBox="0 0 24 24"><text x="12" y="18" text-anchor="middle" font-size="20" font-weight="bold" fill="#00854a" font-family="Arial">${char}</text></svg>`
    }));

    // æœ€çµ‚åˆä½µ
    const iconData = [
        ...originalIcons, 
        ...extendedIcons, 
        ...charIcons
    ];

    // ==========================================
    // 5. ç¨‹å¼é‚è¼¯ (ä¸‹è¼‰ä¿®æ­£ç‰ˆ)
    // ==========================================
    
    let slotState = [
        { iconIndex: 0, customText: originalIcons[0].name },
        { iconIndex: 1, customText: originalIcons[1].name },
        { iconIndex: 2, customText: originalIcons[2].name },
        { iconIndex: 3, customText: originalIcons[3].name },
        { iconIndex: 4, customText: originalIcons[4].name },
        { iconIndex: 5, customText: originalIcons[5].name },
    ];
    let selectedSlotIndex = 0;

    const mainCanvas = document.getElementById('main-canvas');
    const iconLibrary = document.getElementById('icon-library');
    const statusText = document.getElementById('status-text');
    const textInput = document.getElementById('text-input');
    const libraryArea = document.getElementById('library-area');
    const panelBtnText = document.getElementById('panel-btn-text');
    const borderBtnText = document.getElementById('border-btn-text');

    function renderCanvas() {
        mainCanvas.innerHTML = '';
        slotState.forEach((state, slotIndex) => {
            const icon = iconData[state.iconIndex] || iconData[0];
            const slot = document.createElement('div');
            slot.className = 'slot-card';
            if (icon.type === 'special') slot.classList.add('special-green');
            if (slotIndex === selectedSlotIndex) slot.classList.add('active-slot');

            let svgContent = icon.svg;
            if (icon.type === 'outline') {
                svgContent = svgContent.replace('<svg', '<svg class="icon-display icon-outline"');
            } else {
                svgContent = svgContent.replace('<svg', '<svg class="icon-display icon-fill"');
            }

            slot.innerHTML = `${svgContent}<div class="label-display">${state.customText}</div>`;
            slot.onclick = () => selectSlot(slotIndex);
            mainCanvas.appendChild(slot);
        });
    }

    function selectSlot(index) {
        selectedSlotIndex = index;
        statusText.textContent = `é¸å–ä¸­ï¼šç¬¬ ${index + 1} æ ¼`;
        textInput.value = slotState[index].customText;
        renderCanvas();
    }

    function updateText(val) {
        slotState[selectedSlotIndex].customText = val;
        renderCanvas();
    }

    function renderLibrary() {
        iconLibrary.innerHTML = '';
        iconData.forEach((icon, index) => {
            const item = document.createElement('div');
            item.className = 'lib-item';
            let smallSvg = icon.svg;
            if (icon.type === 'outline') {
                smallSvg = smallSvg.replace('<svg', '<svg style="fill:none; stroke:#00854a; stroke-width:5"');
            } else {
                smallSvg = smallSvg.replace('<svg', '<svg style="fill:#00854a"');
            }
            
            let displayName = icon.name ? icon.name.replace('\n', '') : '';
            item.innerHTML = `${smallSvg}<div class="lib-name">${displayName}</div>`;
            item.title = icon.name || `Icon ${index}`;

            item.onclick = () => {
                slotState[selectedSlotIndex].iconIndex = index;
                // è‹¥ç‚ºåŸåœ–ç¤ºå‰‡å¸¶å…¥åç¨±ï¼Œå¦å‰‡æ¸…ç©º
                slotState[selectedSlotIndex].customText = icon.name; 
                textInput.value = icon.name;
                renderCanvas();
            };
            iconLibrary.appendChild(item);
        });
    }

    function toggleLibrary() {
        libraryArea.classList.toggle('hidden');
        panelBtnText.textContent = libraryArea.classList.contains('hidden') ? 'é¡¯ç¤ºæ§åˆ¶é¢æ¿' : 'éš±è—æ§åˆ¶é¢æ¿';
    }

    function toggleRedBorder() {
        mainCanvas.classList.toggle('hide-selection');
        borderBtnText.textContent = mainCanvas.classList.contains('hide-selection') ? 'é¡¯ç¤ºé¸å–æ¡†' : 'éš±è—é¸å–æ¡†';
    }

    // === [é—œéµä¿®æ­£] ä¸‹è¼‰åŠŸèƒ½ï¼šä½¿ç”¨ Clone ç¢ºä¿ 1:1 è¼¸å‡ºä¸é‡ç–Š ===
    function saveAsJpeg() {
        const originalHideState = mainCanvas.classList.contains('hide-selection');
        if (!originalHideState) mainCanvas.classList.add('hide-selection');

        const original = document.getElementById('main-canvas');
        const clone = original.cloneNode(true);

        // è¨­å®š Clone æ¨£å¼ï¼šå¼·åˆ¶ 2500x1686ï¼Œç§»é™¤ç¸®æ”¾ï¼Œç§»å‡ºè¦–çª—å¤–
        clone.style.width = "2500px";
        clone.style.height = "1686px";
        clone.style.transform = "none";
        clone.style.position = "fixed";
        clone.style.top = "0";
        clone.style.left = "-9999px"; 
        clone.style.zIndex = "-1";
        
        document.body.appendChild(clone);

        html2canvas(clone, {
            width: 2500,
            height: 1686,
            scale: 1,
            useCORS: true,
            backgroundColor: null 
        }).then(canvas => {
            const link = document.createElement('a');
            link.download = 'hospital-menu-rounded-slots-2500x1686.jpg';
            link.href = canvas.toDataURL('image/jpeg', 0.9);
            link.click();

            document.body.removeChild(clone);
            if (!originalHideState) mainCanvas.classList.remove('hide-selection');
        });
    }

    // åˆå§‹åŒ–
    textInput.value = slotState[0].customText;
    renderCanvas();
    renderLibrary();

</script>
</body>
</html>