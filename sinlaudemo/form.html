<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="image/carepathicon.ico">
    <title>護理評估表單系統</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        body { background-color: #f3f4f6; font-family: "Microsoft JhengHei", sans-serif; }
        .form-section { background: white; border-radius: 12px; padding: 24px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); margin-bottom: 24px; }
        .section-title { font-size: 1.125rem; font-weight: 700; color: #1f2937; margin-bottom: 16px; border-left: 4px solid #0066FF; padding-left: 12px; }
        input[type="text"], input[type="date"], input[type="number"], select, textarea {
            width: 100%; border: 1px solid #e5e7eb; border-radius: 8px; padding: 10px; outline: none; transition: border-color 0.2s;
        }
        input:focus, select:focus, textarea:focus { border-color: #0066FF; ring: 2px solid #93C5FD; }
        label { display: block; font-size: 0.875rem; font-weight: 600; color: #4b5563; margin-bottom: 6px; }
        .radio-group label { font-weight: normal; margin-bottom: 0; cursor: pointer; display: flex; align-items: center; }
        .radio-group input[type="radio"] { margin-right: 8px; width: auto; }
    </style>
</head>
<body class="p-6 md:p-10">

    <div class="max-w-4xl mx-auto">
        <header class="mb-8 flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold text-gray-800"><i class="fa-solid fa-clipboard-list text-cyan-600 mr-3"></i>綜合護理評估表單</h1>
                <p class="text-gray-500 text-sm mt-1">遠傳醫院個案管理系統專用</p>
            </div>
            <button onclick="window.close()" class="text-gray-400 hover:text-gray-600 font-bold text-sm"><i class="fa-solid fa-xmark mr-1"></i>關閉視窗</button>
        </header>

        <form id="assessmentForm" onsubmit="event.preventDefault(); submitForm();">
            
            <div class="form-section">
                <h2 class="section-title">個案基本資料</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label>個案 ID / 病歷號</label>
                        <input type="text" id="patientId" placeholder="請輸入或掃描條碼" required>
                    </div>
                    <div>
                        <label>評估日期</label>
                        <input type="date" id="assessDate" required>
                    </div>
                    <div>
                        <label>個案姓名</label>
                        <input type="text" id="patientName" placeholder="自動帶入">
                    </div>
                    <div>
                        <label>評估人員</label>
                        <input type="text" value="陳個管師 (預設)" readonly class="bg-gray-50 text-gray-500">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h2 class="section-title">評估項目選擇</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <label class="border rounded-lg p-4 flex items-center cursor-pointer hover:bg-blue-50 transition border-blue-100 bg-blue-50/30">
                        <input type="radio" name="assessType" value="adl" checked>
                        <span class="ml-2 font-bold text-gray-700">日常生活功能 (ADL)</span>
                    </label>
                    <label class="border rounded-lg p-4 flex items-center cursor-pointer hover:bg-blue-50 transition">
                        <input type="radio" name="assessType" value="iadl">
                        <span class="ml-2 font-bold text-gray-700">工具性生活功能 (IADL)</span>
                    </label>
                    <label class="border rounded-lg p-4 flex items-center cursor-pointer hover:bg-blue-50 transition">
                        <input type="radio" name="assessType" value="fall">
                        <span class="ml-2 font-bold text-gray-700">跌倒風險評估</span>
                    </label>
                    <label class="border rounded-lg p-4 flex items-center cursor-pointer hover:bg-blue-50 transition">
                        <input type="radio" name="assessType" value="nutri">
                        <span class="ml-2 font-bold text-gray-700">營養評估 (MNA)</span>
                    </label>
                </div>
            </div>

            <div class="form-section">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="section-title mb-0">巴氏量表 (Barthel Index)</h2>
                    <span class="bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded">總分計算中...</span>
                </div>
                
                <div class="space-y-6">
                    <div class="border-b pb-4">
                        <label class="text-lg mb-2">1. 進食 (Feeding)</label>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3 radio-group">
                            <label><input type="radio" name="q1" value="10"> 10分 - 可自行進食</label>
                            <label><input type="radio" name="q1" value="5"> 5分 - 需部分協助</label>
                            <label><input type="radio" name="q1" value="0"> 0分 - 完全需人協助</label>
                        </div>
                    </div>

                    <div class="border-b pb-4">
                        <label class="text-lg mb-2">2. 移位 (Transfer)</label>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-3 radio-group">
                            <label><input type="radio" name="q2" value="15"> 15分 - 可自行完成</label>
                            <label><input type="radio" name="q2" value="10"> 10分 - 需些微協助</label>
                            <label><input type="radio" name="q2" value="5"> 5分 - 可坐起但需協助移位</label>
                            <label><input type="radio" name="q2" value="0"> 0分 - 完全無法執行</label>
                        </div>
                    </div>

                    <div class="border-b pb-4">
                        <label class="text-lg mb-2">3. 如廁 (Toilet use)</label>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3 radio-group">
                            <label><input type="radio" name="q3" value="10"> 10分 - 可自行完成</label>
                            <label><input type="radio" name="q3" value="5"> 5分 - 需部分協助</label>
                            <label><input type="radio" name="q3" value="0"> 0分 - 完全需人協助</label>
                        </div>
                    </div>
                    
                    <div class="pt-2">
                        <label>評估摘要 / 護理紀錄</label>
                        <textarea rows="3" placeholder="請輸入重點觀察事項..."></textarea>
                    </div>
                </div>
            </div>

            <div class="flex gap-4">
                <button type="submit" class="flex-1 bg-gradient-to-r from-cyan-600 to-blue-600 text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.01] transition transform">
                    <i class="fa-solid fa-floppy-disk mr-2"></i> 儲存評估結果
                </button>
                <button type="button" onclick="window.close()" class="px-6 py-4 bg-gray-200 text-gray-600 font-bold rounded-xl hover:bg-gray-300 transition">
                    取消
                </button>
            </div>

        </form>
    </div>

    <script>
        // 設定預設日期為今天
        document.getElementById('assessDate').valueAsDate = new Date();

        function submitForm() {
            const pid = document.getElementById('patientId').value;
            if(!pid) { alert('請輸入個案 ID'); return; }
            
            // 模擬儲存
            const btn = document.querySelector('button[type="submit"]');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-2"></i> 處理中...';
            btn.disabled = true;

            setTimeout(() => {
                alert('評估表單已成功儲存至系統！');
                btn.innerHTML = originalText;
                btn.disabled = false;
                // window.close(); // 可選：儲存後關閉
            }, 1000);
        }
    </script>
</body>
</html>